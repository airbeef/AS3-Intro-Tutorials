package {	import flash.display.MovieClip;	import flash.events.KeyboardEvent;	import flash.ui.Keyboard;	import flash.events.Event;	public class Player_Jump extends MovieClip	{		private var _vx:Number;		private var _vy:Number;		private var _accelerationX:Number;		private var _accelerationY:Number;		private var _speedLimit:Number;		private var _friction:Number;		private var _gravity:Number;		private var _isOnGround:Boolean;		private var _jumpForce:Number;		public function Player_Jump()		{			_vx = 0;			_vy = 0;			_accelerationX = 0;			_accelerationY = 0;			_speedLimit = 5;			_friction = 0.96;			_gravity = 0.3;			_isOnGround = undefined;			_jumpForce = -10;			this.ears.stop();			//Add stage event listeners			stage.addEventListener(KeyboardEvent.KEY_DOWN,onKeyDown);			stage.addEventListener(KeyboardEvent.KEY_UP,onKeyUp);			addEventListener(Event.ENTER_FRAME, onEnterFrame);		}		private function onKeyDown(event:KeyboardEvent):void		{			if (event.keyCode == Keyboard.LEFT)			{				_accelerationX = -0.2;			}			if (event.keyCode == Keyboard.RIGHT)			{				_accelerationX = 0.2;			}			if ((event.keyCode == Keyboard.UP)			|| (event.keyCode == Keyboard.SPACE))			{				if (_isOnGround)				{					_accelerationY = _jumpForce;					_isOnGround = false;					this.ears.play();				}			}		}		private function onKeyUp(event:KeyboardEvent):void		{			if ((event.keyCode == Keyboard.LEFT)			|| (event.keyCode == Keyboard.RIGHT))			{				_accelerationX = 0;			}			if ((event.keyCode == Keyboard.UP)			|| (event.keyCode == Keyboard.SPACE))			{				_accelerationY = 0;			}		}		private function onEnterFrame(event:Event):void		{			//Initialize local variables			var playerHalfWidth:uint = this.body.width / 2;			var playerHalfHeight:uint = this.body.height / 2;			//Apply Acceleration			_vx += _accelerationX;			if (_vx > _speedLimit)			{				_vx = _speedLimit;			}			if (_vx < -_speedLimit)			{				_vx = -_speedLimit;			}						_vy += _accelerationY;			if (_vy > (_speedLimit * 2))			{				_vy = (_speedLimit * 2);				//trace("terminal velocity");			}			//No speed limit moving up the stage						//Apply Friction			if (Math.abs(_vx)<0.1)			{				_vx = 0;			}			if (Math.abs(_vy)<0.1)			{				_vy = 0;			}			if (_isOnGround)			{				_vx *= _friction;			}			//Apply Gravity			_vy += _gravity;			//Move the player			x += _vx;			y += _vy;			//Prevent object from moving up if			//it's not on the ground			if (! _isOnGround)			{				_accelerationY=0;			}			//Flap ears only when going up			if (_vy > 0)			{				this.ears.gotoAndStop(1);			}			//Stop player at stage edges			if (x + playerHalfWidth > stage.stageWidth)			{				_vx = 0;				x = stage.stageWidth - playerHalfWidth;			}			else if (x - playerHalfWidth<0)			{				_vx = 0;				x = 0 + playerHalfWidth;			}			if (y - playerHalfHeight < 0)			{				_vy = 0;				y = 0 + playerHalfHeight;			}			else if (y + playerHalfHeight > stage.stageHeight)			{				_vy = 0;				y = stage.stageHeight - playerHalfHeight;				_isOnGround = true;			}		}	}}
package {	import flash.display.MovieClip;	import flash.events.Event;	import flash.events.MouseEvent;	import flash.events.KeyboardEvent;	import flash.ui.Keyboard;	import flash.geom.Point;	public class Player extends MovieClip	{		//variables		private var _vx:Number;		private var _vy:Number;		private var _accelerationX:Number;		private var _accelerationY:Number;		private var _acceleration:Number;		private var _friction:Number;		private var _angle:Number;		private var _shotFired:Boolean;		public function Player()		{			//Initialize variables			_vx = 0;			_vy = 0;			_acceleration = 0;			_friction = 0.96;			_angle = 0;			_shotFired = false;			//Add listeners			stage.addEventListener(MouseEvent.MOUSE_DOWN, onMouseDown);			stage.addEventListener(MouseEvent.MOUSE_UP, onMouseUp);			addEventListener(Event.ENTER_FRAME, onEnterFrame);		}		private function onMouseDown(event:MouseEvent):void		{			if (! _shotFired)			{				shootBullet();				_shotFired = true;			}		}		private function onMouseUp(event:MouseEvent):void		{			_shotFired = false;		}		private function onEnterFrame(event:Event):void		{			_angle = Math.atan2(y - stage.mouseY,x - stage.mouseX);			_accelerationX = Math.cos(_angle) * _acceleration;			_accelerationY = Math.sin(_angle) * _acceleration;			//Calculate the distance to the mouse			var dx:Number = stage.mouseX - this.x;			var dy:Number = stage.mouseY - this.y;			var distance:Number = Math.sqrt(dx * dx + dy * dy);			//var distanceSquared:Number = (dx * dx + dy * dy);			//Increase acceleration if the mouse is more than 75 pixels away			if (distance >= 75)			//if (distanceSquared >= 5625)			{				_acceleration = -0.5;				_friction = 1;			}			else			{				_acceleration = 0;				_friction = 0.96;			}			//Apply acceleration			_vx += _accelerationX;			_vy += _accelerationY;			//Apply friction			_vx *= _friction;			_vy *= _friction;			//Move player			x += _vx;			y += _vy;			//Move wand			var radius:int =- 50;			wand.x = radius * Math.cos(_angle);			wand.y = radius * Math.sin(_angle);		}		private function shootBullet():void		{			//Bullet's velocity			var bullet_Vx:Number=Math.cos(_angle) * -10;			var bullet_Vy:Number=Math.sin(_angle) * -10;			//Bullet's start position			var radius:int =- 50;			var bullet_StartX:Number = x + radius * Math.cos(_angle);			var bullet_StartY:Number = y + radius * Math.sin(_angle);			//Create bullet instance and add it to the stage			var bullet:Bullet = new Bullet(bullet_Vx, bullet_Vy, bullet_StartX, bullet_StartY, "star");			parent.addChild(bullet);		}	}}
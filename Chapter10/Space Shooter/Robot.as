package {	import flash.display.MovieClip;	import flash.events.Event;	import flash.events.TimerEvent;	import flash.utils.Timer;	public class Robot extends MovieClip	{		//Constants		private const RANGE:Number = 250;		private const SPEED:Number = 3;		private const TURN_SPEED:Number = 0.3;		private const FRICTION:Number = 0.96;		//Variables		private var _vx:Number;		private var _vy:Number;		private var _angle:Number;		private var _direction:Number;		private var _shotFired:Boolean;		private var _timer:Timer;		public function Robot()		{			//Initialize variables			_vx = 0;			_vy = 0;			_angle = 0;			_direction = 0;			_shotFired = false;			//Initialize timer			_timer = new Timer(1000);			_timer.addEventListener(TimerEvent.TIMER, onShootBullet);			_timer.start();			//Add listeners			addEventListener(Event.ENTER_FRAME, onEnterFrame);		}		private function onEnterFrame(event:Event):void		{			//Calculate the distance			var target = MovieClip(root).player;			var dx:Number = target.x - this.x;			var dy:Number = target.y - this.y;			//This code isn't optimized. Can you figure out how to re-write			//it so that it avoids the use of Math.sqrt?			var distance = Math.sqrt(dx * dx + dy * dy);			//fire bullet if target is within range			if (distance <= RANGE)			{				_timer.start();				_direction = Math.atan2(y - target.y, x - target.x) * (180/Math.PI);				_angle = _direction * Math.PI / 180;				rotation = _direction - 90;								//Find out how far to move				var moveX:Number = TURN_SPEED * dx / distance;				var moveY:Number = TURN_SPEED * dy / distance;				//Increase velocity				_vx += moveX;				_vy += moveY;				//Find total distance to move				var moveDistance:Number = Math.sqrt(_vx * _vx + _vy * _vy);				//Apply easing				_vx = SPEED * _vx / moveDistance;				_vy = SPEED * _vy / moveDistance;			}			else			{				_timer.stop();			}			//Apply friction			_vx *= FRICTION;			_vy *= FRICTION;			//Move			x += _vx;			y += _vy;		}		private function onShootBullet(event:TimerEvent):void		{			//Bullet's velocity			var bullet_Vx:Number = Math.cos(_angle) *- 10;			var bullet_Vy:Number = Math.sin(_angle) *- 10;			//Bullet's start position			var radius =- 50;			var bullet_StartX = x + radius * Math.cos(_angle);			var bullet_StartY = y + radius * Math.sin(_angle);			//Create bullet instance and add it to the stage			var bullet:Bullet = new Bullet(bullet_Vx, bullet_Vy, bullet_StartX, bullet_StartY, "circle");			parent.addChild(bullet);		}	}}
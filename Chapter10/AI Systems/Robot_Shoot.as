package {	import flash.display.MovieClip;	import flash.events.Event;	import flash.events.TimerEvent;	import flash.utils.Timer;	public class Robot_Shoot extends MovieClip	{		//Constants		private const RANGE:Number = 250;		//Variables		private var _vx:Number;		private var _vy:Number;		private var _angle:Number;		private var _direction:Number;		private var _shotFired:Boolean;		private var _timer:Timer;		public function Robot_Shoot()		{			//Initialize variables			_vx = 0;			_vy = 0;			_angle = 0;			_direction = 0;			_shotFired = false;						//Initialize timer			_timer = new Timer(300);			_timer.addEventListener(TimerEvent.TIMER, onShootBullet);			_timer.start();			//Add listeners			addEventListener(Event.ENTER_FRAME, onEnterFrame);		}		private function onEnterFrame(event:Event):void		{			//Find the target			var target = MovieClip(root).player;						//Find the direction of rotation			_direction = Math.atan2(y - target.y, x - target.x) * (180/Math.PI);			_angle = _direction * Math.PI / 180;						//Rotate the object			rotation = _direction - 90;			//Calculate the distance to the target			var dx:Number = target.x - this.x;			var dy:Number = target.y - this.y;			var distance = Math.sqrt(dx * dx + dy * dy);			//fire bullet if target is within range			if (distance <= RANGE)			{				_timer.start();			}			else			{				_timer.stop();			}		}		private function onShootBullet(event:TimerEvent):void		{			//Bullet's velocity			var bullet_Vx:Number = Math.cos(_angle) * -10;			var bullet_Vy:Number = Math.sin(_angle) * -10;			//Bullet's start position			var radius = -50;			var bullet_StartX = x + radius * Math.cos(_angle);			var bullet_StartY = y + radius * Math.sin(_angle);			//Create bullet instance and add it to the stage			var bullet:Bullet = new Bullet(bullet_Vx, bullet_Vy, bullet_StartX, bullet_StartY,"circle");			parent.addChild(bullet);						//Find a random start time for the next bullet			//var randomFireTime:Number = Math.round(Math.random() * 1000) + 200;			//_timer.delay = randomFireTime;		}	}}
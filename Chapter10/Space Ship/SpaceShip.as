package {	import flash.display.MovieClip;	import flash.events.Event;	import flash.events.MouseEvent;	import flash.events.KeyboardEvent;	import flash.ui.Keyboard;	public class SpaceShip extends MovieClip	{		//variables		private var _vx:Number;		private var _vy:Number;		private var _rotationSpeed:Number;		private var _accelerationX:Number;		private var _accelerationY:Number;		private var _acceleration:Number;		private var _friction:Number;		private var _angle:Number;		private var _direction:Number;		private var _shotFired:Boolean;		public function SpaceShip()		{			init();		}		private function init():void		{			//Initialize variables			_vx = 0;			_vy = 0;			_acceleration = 0;			_rotationSpeed = 0;			_friction = 0.96;			_angle = 0;			_direction = 0;			_shotFired = false;			//Add listeners			stage.addEventListener(KeyboardEvent.KEY_DOWN,onKeyDown);			stage.addEventListener(KeyboardEvent.KEY_UP,onKeyUp);			addEventListener(Event.ENTER_FRAME,onEnterFrame);		}		private function onKeyDown(event:KeyboardEvent):void		{			if (event.keyCode == Keyboard.SPACE)			{				if (! _shotFired)				{					shootBullet();					_shotFired = true;				}			}			if (event.keyCode == Keyboard.LEFT)			{				_rotationSpeed = -5;			}			if (event.keyCode == Keyboard.RIGHT)			{				_rotationSpeed = 5;			}			if (event.keyCode == Keyboard.UP)			{				_acceleration = 0.2;				_friction = 1;			}		}		private function onKeyUp(event:KeyboardEvent):void		{			if (event.keyCode == Keyboard.SPACE)			{				_shotFired = false;			}			if (event.keyCode == Keyboard.UP)			{				_acceleration = 0;				_friction = 0.96;			}			if (event.keyCode == Keyboard.LEFT)			{				_rotationSpeed = 0;			}			if (event.keyCode == Keyboard.RIGHT)			{				_rotationSpeed = 0;			}		}		private function onEnterFrame(event:Event):void		{			_angle = rotation * (Math.PI / 180);			_accelerationX = Math.cos(_angle) * _acceleration;			_accelerationY = Math.sin(_angle) * _acceleration;			//Rotate ship			rotation += _rotationSpeed;						//Apply acceleration			_vx += _accelerationX;			_vy += _accelerationY;			//Apply friction			_vx *= _friction;			_vy *= _friction;			//Move ship			x += _vx;			y += _vy;		}		private function shootBullet():void		{			//Bullet's velocity			var bullet_Vx:Number = Math.cos(_angle) * 10 + _vx;			var bullet_Vy:Number = Math.sin(_angle) * 10 + _vy;			//Bullet's start position			var radius:uint = 25;			var bullet_StartX:Number = x + radius * Math.cos(_angle);			var bullet_StartY:Number = y + radius * Math.sin(_angle);			//Create bullet instance and add it to the stage			var bullet:Bullet = new Bullet(bullet_Vx, bullet_Vy, bullet_StartX, bullet_StartY, "circle");			parent.addChild(bullet);		}	}}